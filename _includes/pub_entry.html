<div class="pub-entry" style="display: flex; align-items: flex-start; margin-bottom: 1.5em;">

  <!-- Left Column: pubnum -->
  <div class="pub-left" style="width: 3em; text-align: right; padding-right: 1em; flex-shrink: 0;">
    <span class="pubnum">{{ include.pubnum }}</span>
  </div>

  <!-- Middle Column: Title, Authors, Info -->
  <div class="pub-middle" style="flex: 1;">
    {% assign pub = include.pub %}

    <span class="title">{{ pub.title }}</span><br>

    <span class="authors">
      {% for author in pub.authors %}
        {%- assign name = author.first -%}
        {%- if author.middle %}
          {%- for m in author.middle %}
            {%- assign name = name | append: " " | append: m | append: "." -%}
          {%- endfor %}
        {%- endif %}
        {%- if author.tussenvoegsel %}
          {%- assign name = name | append: " " | append: author.tussenvoegsel -%}
        {%- endif %}
        {%- assign name = name | append: " " | append: author.last -%}
        {{ name }}{%- unless forloop.last %}, {% endunless %}
      {% endfor %}
    </span><br>

    <span class="info">
      {% if pub.type == "journal" %}
        <i>{{ pub.journal }}</i>{% if pub.volume %}, {{ pub.volume }}{% if pub.issue %}({{ pub.issue }}){% endif %}{% endif %}{% if pub.pages %}:{{ pub.pages }}{% endif %}{% if pub.year %}, {{ pub.year }}{% endif %}.
      {% elsif pub.type == "preprint" %}
        preprint{% if pub.preprint-server %}, {{ pub.preprint-server }}{% endif %}{% if pub.preprint-identifier %}:{{ pub.preprint-identifier }}{% endif %}{% if pub.year %}, {{ pub.year }}{% endif %}.
      {% elsif pub.type == "thesis" %}
        {% if pub.note %}{{ pub.note }}{% endif %}{% if pub.year %}, {{ pub.year }}{% endif %}.
      {% endif %}
    </span>
  </div>

  <!-- Right Column: Buttons -->
  <div class="pub-right" style="width: 8em; text-align: right; flex-shrink: 0; padding-left: 1em;">
    <div class="button-group">
      {% if pub.preprint-url %}
        <a class="link-button" href="{{ pub.preprint-url }}" target="_blank">preprint</a><br>
      {% endif %}
      {% if pub.abstract %}
        <button class="toggle-button" onclick="toggleBox('abs_{{ pub.title | slugify }}')">abstract</button><br>
      {% endif %}
      {% if pub.bibtex %}
        <button class="toggle-button" onclick="toggleBox('bib_{{ pub.title | slugify }}')">bibtex</button><br>
      {% endif %}
    </div>
  </div>
</div>

<!-- Optional toggles below full row -->
{% if pub.abstract %}
  <div id="abs_{{ pub.title | slugify }}" class="abstract-box noshow">{{ pub.abstract }}</div>
{% endif %}
{% if pub.bibtex %}
  <div id="bib_{{ pub.title | slugify }}" class="bibtex noshow"><pre>{{ pub.bibtex }}</pre></div>
{% endif %}
